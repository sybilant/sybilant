;; -*- mode: clojure -*-
(%deftext (%label exit))

(%defdata (%label PI))

(%defconst (%label TAU) 6)
(%defconst (%label ANTITAU) #sint8 -6)
(%defdata (%label something) ANTITAU)

(%deftext (%label foo)
  (%mov %rax (%mem64 1))
  (%mov %bl (%mem8 %rdi bar))
  (%jmp bar)
  (%label bar)
  (%add %rax 1))

(%defdata (%label bar) #sint8 1 #uint8 2)

(%deftext ^:extern (%label _start)
  (%mov %rdi TAU)
  (%add %rdi ANTITAU)
  (%jmp exit))
